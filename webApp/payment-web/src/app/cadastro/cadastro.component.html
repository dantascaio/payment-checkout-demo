<p-toast></p-toast>
<p-accordion>
  <p-accordionTab header="Cadastrar novo pagamento">
    <form [formGroup]="form">
      <div class="p-grid">
        <div class="p-field p-col-4">
          <span><i class="pi pi-user"></i></span>
          <input pInputText type="text" placeholder="Nome do Usuário" formControlName="payer_name">
        </div>
        <br>
        <div class="p-field p-col-4">
          <span><i class="pi pi-credit-card"></i></span>
          <input pInputText type="number" placeholder="Número do Cartão" formControlName="card_number">
        </div>
        <br>
        <div class="p-field p-col-4">
          <span><i class="pi pi-money-bill"></i></span>
          <input pInputText type="number" placeholder="Valor da Compra" formControlName="payment_value">
        </div>
        <br>
        <div class="p-field p-col-4">
          <span><i class="pi pi-envelope"></i></span>
          <input pInputText type="number" placeholder="CEP do Usuário" formControlName="zip_code">
        </div>
        <br>
        <div class="p-col-4">
          <button pButton type="button" [attr.aria-label]="'Criar novo pagamento'" label="Cadastrar Novo Pagamento"
            [disabled]="!form.valid" (click)="inputUsuario()"></button>
        </div>
      </div>
    </form>
  </p-accordionTab>
  <p-accordionTab header="Alterar Pagamentos Cadastrados">
    <p-table [value]="userSourcer" dataKey="payment_id" responsiveLayout="scroll" [scrollable]="true"
      scrollHeight="400px" [hidden]="userSourcer.length == 0">
      <ng-template pTemplate="header">
        <tr>
          <th>ID do pagamento</th>
          <th>Nome</th>
          <th>Valor do pagamento</th>
          <th>CEP</th>
          <th>Status</th>
          <th>Processa</th>
          <th>Finaliza</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-user let-expanded="expanded">
        <tr [pSelectableRow]="user">
          <td>{{ user.payment_id }}</td>
          <td>{{ user.payer_name }}</td>
          <td>{{ user.payment_value }}</td>
          <td>{{ user.zip_code }}</td>
          <td>{{ user.status_code}} - {{ user.status }}</td>
          <td>
            <button pButton pRipple type="button" icon="pi pi-sync" class="p-button-rounded p-button-text p-button-info"
              (click)="alteraPagamento(user, 2)" pTooltip="Processar Pagamento"></button>
          </td>
          <td>
            <button pButton pRipple type="button" icon="pi pi-check" class="p-button-rounded p-button-text p-button-info"
              (click)="alteraPagamento(user, 3)" pTooltip="Processar Pagamento"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <div class="p-grid" style="text-align:center">
      <div class="p-col">
        <span *ngIf="userSourcer.length == 0">
          <p>Nenhum Pagamento Cadastrado!</p>
        </span>
      </div>
    </div>
  </p-accordionTab>
</p-accordion>